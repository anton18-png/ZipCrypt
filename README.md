# ZipCrypt - Крипто архиватор и менеджер паролей

ZipCrypt - это приложение для шифрования файлов и управления паролями, написанное на Python с использованием ttkbootstrap для современного интерфейса. Оно обеспечивает безопасное шифрование файлов и управление паролями с использованием OpenSSL и 7zip.

![ZipCrypt Screenshot](https://github.com/user-attachments/assets/97359e80-e906-48e9-af90-e89a4f9ce376)

## Возможности

### Шифрование файлов
- Выбор файлов или папок для шифрования/расшифровки.
- Поддержка нескольких методов шифрования:
  - **OpenSSL -> 7zip (по умолчанию)**: Файлы шифруются с использованием AES-256-CBC через OpenSSL, затем архивируются и опционально шифруются с помощью 7zip (AES-256).
  - **Только OpenSSL**: Прямое шифрование файлов с использованием AES-256-CBC.
  - **OpenSSL -> 7zip без предварительного шифрования**: Файлы архивируются и шифруются с помощью 7zip (AES-256).
- Подробное логирование операций шифрования и расшифровки в файл `zipcrypt.log`.
- Поддержка различных версий 7zip (9.20, 24.08, 25.01_extra) и OpenSSL (3.2.4, 3.5.1, 3.5.1_Light).

### Менеджер паролей
- Создание и управление базами паролей.
- Импорт/экспорт паролей в формате CSV.
- Копирование паролей в буфер обмена.
- Показ/скрытие паролей в интерфейсе.
- Шифрование баз паролей с использованием AES-256-CBC.

### Настройки
- Выбор метода шифрования (`binary_openssl_7zip`, `openssl_only`, `openssl_7zip`).
- Настройка степени сжатия (без сжатия, быстрое, среднее, нормальное, высокое, максимальное).
- Выбор версий 7zip и OpenSSL.
- Настройка Telegram-уведомлений (токен и chat ID).
- Установка мастер-пароля, который хранится в зашифрованном виде (`master_password.enc`) с использованием AES-256-CBC, PBKDF2 и соли.
- Выбор темы интерфейса (поддерживаются темы ttkbootstrap).

## Установка

### Требования
- Python 3.7 или выше.
- 7zip (размещен в папке `7zip/`).
- OpenSSL (размещен в папке `OpenSSL/`).

### Установка зависимостей
```bash
pip install -r requirements.txt
```

### Структура папок
```
ZipCrypt/
├── 7zip/
│   ├── 7zip_25.01_extra/
│   │   └── 7za.exe
│   ├── 7zip_24.08/
│   │   └── 7za.exe
│   └── 7zip_9.20/
│       └── 7za.exe
├── OpenSSL/
│   ├── OpenSSL_3.2.4/
│   │   └── openssl.exe
│   ├── OpenSSL_3.5.1/
│   │   └── openssl.exe
│   └── OpenSSL_3.5.1_Light/
│       └── openssl.exe
├── main.py
├── utils.py
├── crypto_engines.py
├── files_tab.py
├── password_manager.py
├── settings.py
├── master_password_manager.py
├── requirements.txt
└── README.md
```

## Запуск
```bash
python main.py
```

## Использование

### Вкладка "Файлы"
1. **Выбор файлов**: Нажмите "Выбрать файл" или "Выбрать папку".
2. **Ввод пароля**: Введите пароль для шифрования (или используйте мастер-пароль, если установлен).
3. **Шифрование**: Нажмите "Зашифровать", выберите место сохранения.
4. **Расшифровка**: Выберите зашифрованный файл, введите пароль и нажмите "Расшифровать".

### Вкладка "Пароли"
1. **Создание базы**: Нажмите "Создать базу" для новой базы паролей.
2. **Добавление паролей**: Нажмите "Добавить" для создания записи.
3. **Сохранение**: Введите мастер-пароль (если требуется) и нажмите "Сохранить".
4. **Импорт/Экспорт**: Используйте кнопки для импорта/экспорта в CSV.

### Вкладка "Настройки"
- **Метод шифрования**: Выберите метод (`binary_openssl_7zip`, `openssl_only`, `openssl_7zip`).
- **Сжатие**: Настройте степень сжатия для 7zip.
- **Версии программ**: Выберите версии 7zip и OpenSSL.
- **Telegram**: Настройте токен и chat ID для уведомлений.
- **Мастер-пароль**: Установите или обновите мастер-пароль, который шифруется с использованием AES-256-CBC.
- **Тема**: Выберите тему интерфейса.

## Методы шифрования

### OpenSSL -> 7zip (по умолчанию, `binary_openssl_7zip`)
1. **OpenSSL шифрование**:
   - Файлы шифруются с использованием AES-256-CBC.
   - Ключ (256 бит) генерируется с помощью PBKDF2 (HMAC-SHA256, итерации по умолчанию).
   - Случайная 8-байтная соль добавляется для уникальности ключа.
   - CBC режим: каждый блок данных (128 бит) XOR-ится с предыдущим зашифрованным блоком.
2. **7zip архивация**:
   - Зашифрованные файлы сжимаются с использованием LZMA (Lempel-Ziv-Markov chain Algorithm).
   - Опционально применяется AES-256 шифрование с паролем.
   - Результат: архив в формате .7z.

### Только OpenSSL (`openssl_only`)
- Прямое шифрование файлов с использованием AES-256-CBC через OpenSSL.
- PBKDF2 используется для derivation ключа, соль добавляется для защиты от атак.
- Подходит для одиночных файлов, не требующих сжатия.

### OpenSSL -> 7zip без предварительного шифрования (`openssl_7zip`)
- Файлы архивируются и шифруются с помощью 7zip (AES-256).
- Пароль используется для derivation ключа без PBKDF2 (менее безопасно, чем OpenSSL с PBKDF2).
- Подходит для создания зашифрованных архивов без предварительного шифрования OpenSSL.

## Криптографические алгоритмы

### AES-256-CBC
- **Описание**: Симметричный блочный шифр с 256-битным ключом, работающий в режиме Cipher Block Chaining (CBC).
- **Безопасность**: Устойчив к атакам благодаря большому размеру ключа и CBC, который предотвращает повторение одинаковых блоков.
- **Использование**: OpenSSL для шифрования мастер-пароля и файлов, 7zip для архивов.

### PBKDF2
- **Описание**: Функция derivation ключа, использующая HMAC-SHA256 с солью и множеством итераций (по умолчанию в OpenSSL).
- **Цель**: Увеличивает время, необходимое для атак brute-force или rainbow table.
- **Использование**: OpenSSL применяет PBKDF2 для создания ключа шифрования из пароля.

### Соль
- **Описание**: Случайная 8-байтная последовательность, добавляемая к паролю перед derivation ключа.
- **Цель**: Обеспечивает уникальность ключа даже для одинаковых паролей, предотвращая атаки с использованием предвычисленных таблиц.
- **Использование**: Хранится в заголовке зашифрованного файла OpenSSL.

## Логирование
- Все операции (шифрование, расшифровка, изменение настроек) логируются в `zipcrypt.log`.
- Логи включают временные метки, уровни логирования (INFO, ERROR) и подробности операций.

## Безопасность
- **Шифрование**: Используется AES-256-CBC с PBKDF2 и солью для мастер-пароля и файлов.
- **Мастер-пароль**: Хранится в зашифрованном виде в `master_password.enc`, защищенном AES-256-CBC.
- **Временные файлы**: Автоматически удаляются после операций для предотвращения утечек.
- **Ограничения**: Мастер-пароль и временные файлы не перезаписываются при удалении, что может оставить следы в файловой системе.

## Сравнение с другими инструментами

### VeraCrypt
- **Описание**: Инструмент для создания зашифрованных контейнеров и дисков.
- **Шифрование**: AES-256, Serpent, Twofish (с возможностью каскадного шифрования).
- **Особенности**: Поддерживает скрытые тома, шифрование целых дисков, кроссплатформенность.
- **Сравнение с ZipCrypt**:
  - **Преимущества VeraCrypt**: Скрытые тома, шифрование дисков, множественные алгоритмы.
  - **Преимущества ZipCrypt**: Интеграция управления паролями, Telegram-уведомления, простой интерфейс для шифрования файлов.
  - **Недостатки ZipCrypt**: Нет поддержки скрытых томов или шифрования дисков.

### Cryptomator
- **Описание**: Инструмент для шифрования файлов в облачных хранилищах.
- **Шифрование**: AES-256-CBC для содержимого файлов, Scrypt для derivation ключа.
- **Особенности**: Прозрачное шифрование для облачных сервисов, кроссплатформенность.
- **Сравнение с ZipCrypt**:
  - **Преимущества Cryptomator**: Оптимизирован для облаков, автоматическое монтирование хранилищ.
  - **Преимущества ZipCrypt**: Поддержка 7zip для сжатия, управление паролями, настраиваемые методы шифрования.
  - **Недостатки ZipCrypt**: Не ориентирован на облачные хранилища.

### OpenSSL
- **Описание**: Библиотека и инструмент командной строки для криптографии.
- **Шифрование**: Поддерживает AES (CBC, CTR, GCM), RSA, и другие алгоритмы.
- **Особенности**: Высокая гибкость, поддержка множества форматов и алгоритмов.
- **Сравнение с ZipCrypt**:
  - **Преимущества OpenSSL**: Гибкость, поддержка множества алгоритмов, широко используется.
  - **Преимущества ZipCrypt**: Удобный графический интерфейс, интеграция с 7zip и управлением паролями.
  - **Недостатки ZipCrypt**: Ограничен AES-256-CBC, зависит от внешнего OpenSSL.

### 7zip
- **Описание**: Архиватор с поддержкой шифрования.
- **Шифрование**: AES-256 для зашифрованных архивов.
- **Особенности**: Высокая степень сжатия, поддержка множества форматов.
- **Сравнение с ZipCrypt**:
  - **Преимущества 7zip**: Простота, высокая степень сжатия, поддержка различных форматов.
  - **Преимущества ZipCrypt**: PBKDF2 с помощью OpenSSL, управление паролями, Telegram интеграция.
  - **Недостатки ZipCrypt**: Более сложная настройка по сравнению с прямым использованием 7zip.

### WinRAR
- **Описание**: Популярный архиватор с поддержкой шифрования.
- **Шифрование**: AES-256 для зашифрованных архивов.
- **Особенности**: Удобный интерфейс, поддержка RAR и ZIP форматов.
- **Сравнение с ZipCrypt**:
  - **Преимущества WinRAR**: Простота использования, широкая поддержка форматов.
  - **Преимущества ZipCrypt**: Открытый исходный код, PBKDF2, управление паролями.
  - **Недостатки ZipCrypt**: Менее интуитивен для пользователей, привыкших к WinRAR.

## Поддержка
При возникновении проблем:
1. Проверьте наличие 7zip и OpenSSL в папках `7zip/` и `OpenSSL/`.
2. Убедитесь, что пути к исполняемым файлам указаны правильно в настройках.
3. Проверьте логи в `zipcrypt.log` для диагностики ошибок.
4. Убедитесь, что есть права на запись для `settings.json` и `master_password.enc`.

## Лицензия
ZipCrypt распространяется под лицензией MIT.
