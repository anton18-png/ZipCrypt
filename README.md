# ZipCrypt - Крипто архиватор и менеджер паролей

ZipCrypt - это приложение для шифрования файлов и управления паролями, написанное на Python с использованием ttkbootstrap для современного интерфейса. Оно сочетает безопасное шифрование файлов (OpenSSL, 7zip, Zstandard) и встроенный менеджер паролей.

![ZipCrypt Screenshot](https://github.com/user-attachments/assets/97359e80-e906-48e9-af90-e89a4f9ce376)

## Возможности

### Шифрование файлов
- Выбор файлов или папок для шифрования/расшифровки.
- Поддержка нескольких методов шифрования:
  - **Двоичный код -> Base64 -> OpenSSL -> 7zip (по умолчанию, `binary_openssl_7zip`)**: Пароль преобразуется в двоичный код, затем в Base64, файлы шифруются через OpenSSL (AES-256-CBC, PBKDF2, соль), затем архивируются через 7zip (AES-256).
  - **Только OpenSSL (`openssl_only`)**: Прямое шифрование файлов с использованием AES-256-CBC, PBKDF2 и соли.
  - **OpenSSL -> 7zip (`openssl_7zip`)**: Файлы шифруются через OpenSSL (AES-256-CBC, PBKDF2, соль), затем архивируются через 7zip (AES-256).
  - **7zip без шифрования пароля (`7zip_no_encryption`)** - архивирование с паролем в открытом виде
  - **Без пароля (`no_password`)** - простое сжатие без шифрования
- Подробное логирование операций в файл `zipcrypt.log`.
- Поддержка различных версий 7zip (9.20, 24.08, 25.01_extra) и OpenSSL (3.2.4, 3.5.1, 3.5.1_Light).

## Методы шифрования

### Двоичный код -> Base64 -> OpenSSL -> 7zip (по умолчанию, `binary_openssl_7zip`)
1. Пароль преобразуется в двоичный код.
2. Двоичный код кодируется в Base64.
3. Файлы шифруются с использованием OpenSSL:
   - **Алгоритм**: AES-256-CBC.
   - **Ключ**: 256-битный, генерируется с помощью PBKDF2 (HMAC-SHA256).
   - **Соль**: Случайная 8-байтная последовательность.
   - **CBC**: Каждый блок данных (128 бит) XOR-ится с предыдущим зашифрованным блоком.
4. Зашифрованные файлы архивируются через 7zip (LZMA, опционально AES-256).

### Только OpenSSL (`openssl_only`)
- Прямое шифрование файлов с использованием AES-256-CBC, PBKDF2 и соли.
- Подходит для одиночных файлов, не требующих сжатия.

### OpenSSL -> 7zip (`openssl_7zip`)
- Файлы шифруются через OpenSSL (AES-256-CBC, PBKDF2, соль).
- Затем архивируются через 7zip (LZMA, опционально AES-256).

### Новые методы шифрования

### Двоичный код -> Base64 -> OpenSSL -> 7zip без шифрования пароля (`binary_openssl_7zip_no_pass_enc`)
1. Пароль преобразуется в двоичный код и Base64
2. Файлы шифруются через OpenSSL с преобразованным паролем
3. Зашифрованные файлы архивируются через 7zip с паролем в открытом виде
4. Уровни сжатия: 0-9
5. Результат: `.dll` архив

**Особенности:**
- Промежуточное шифрование через OpenSSL
- Пароль архива не шифруется
- Быстрее полного шифрования, но менее безопасно для пароля архива

### Двоичный код -> Base64 -> OpenSSL -> 7zip без пароля (`binary_openssl_7zip_no_pass`)
1. Фиксированный пароль для OpenSSL
2. Файлы шифруются через OpenSSL
3. Зашифрованные файлы архивируются через 7zip без пароля
4. Уровни сжатия: 0-9
5. Результат: `.dll` архив

**Особенности:**
- Шифрование только на уровне OpenSSL
- Нет защиты паролем архива
- Максимальная скорость при сохранении базового шифрования

#### 7zip без шифрования пароля (`7zip_no_encryption`)
- Пароль передается в открытом виде (не шифруется)
- Используется только архивирование 7zip с паролем
- Подходит для случаев, когда не требуется криптографическая защита пароля
- Быстрее стандартного метода, но менее безопасно

#### Без пароля (`no_password`)
- Простое архивирование без пароля и шифрования
- Максимальная скорость работы
- Подходит для сжатия неконфиденциальных данных
- Сохраняет все преимущества сжатия 7zip без накладных расходов на шифрование
- Сжатие неконфиденциальных данных
- Быстрое создание резервных копий

## Сравнение методов
| Метод                          | Шифрование OpenSSL | Шифрование 7zip | Пароль архива | Скорость | Безопасность |
|--------------------------------|--------------------|-----------------|---------------|----------|--------------|
| binary_openssl_7zip            | Да                 | Да              | Зашифрован    | Низкая   | ⭐⭐⭐⭐⭐      |
| binary_openssl_7zip_no_pass_enc | Да                 | Да              | Открытый      | Средняя  | ⭐⭐⭐         |
| binary_openssl_7zip_no_pass     | Да                 | Нет             | Нет           | Высокая  | ⭐⭐          |
| openssl_only                   | Да                 | Нет             | Нет           | Средняя  | ⭐⭐⭐⭐       |
| openssl_7zip                   | Да                 | Да              | Открытый      | Средняя  | ⭐⭐⭐         |
| 7zip_no_encryption             | Нет                | Да              | Открытый      | Высокая  | ⭐⭐          |
| no_password                    | Нет                | Нет             | Нет           | Макс.    | ⭐            |

### Менеджер паролей
- Создание и управление базами паролей.
- Импорт/экспорт паролей в формате CSV.
- Копирование паролей в буфер обмена.
- Показ/скрытие паролей в интерфейсе.
- Шифрование баз паролей с использованием AES-256-CBC.

### Настройки
- Выбор метода шифрования (`binary_openssl_7zip`, `openssl_only`, `openssl_7zip`).
- Настройка степени сжатия (без сжатия, быстрое, среднее, нормальное, высокое, максимальное).
- Выбор версий 7zip и OpenSSL.
- Настройка Telegram-уведомлений (токен и chat ID).
- Установка мастер-пароля, хранимого в зашифрованном виде (`master_password.enc`) с использованием AES-256-CBC, PBKDF2 и соли.
- Выбор темы интерфейса (поддерживаются темы ttkbootstrap).

## Установка

### Требования
- Python 3.7 или выше.
- 7zip (в папке `7zip/`).
- OpenSSL (в папке `OpenSSL/`).

### Установка зависимостей
```bash
pip install -r requirements.txt
```

### Структура папок
```
ZipCrypt/
├── 7zip/
│   ├── 7zip_25.01_extra/
│   │   └── 7za.exe
│   ├── 7zip_24.08/
│   │   └── 7za.exe
│   └── 7zip_9.20/
│       └── 7za.exe
├── OpenSSL/
│   ├── OpenSSL_3.2.4/
│   │   └── openssl.exe
│   ├── OpenSSL_3.5.1/
│   │   └── openssl.exe
│   └── OpenSSL_3.5.1_Light/
│       └── openssl.exe
├── main.py
├── utils.py
├── crypto_engines.py
├── files_tab.py
├── password_manager.py
├── settings.py
├── master_password_manager.py
├── requirements.txt
└── README.md
```

## Запуск
```bash
python main.py
```

## Использование

### Вкладка "Файлы"
1. **Выбор файлов**: Нажмите "Выбрать файл" или "Выбрать папку".
2. **Ввод пароля**: Введите пароль или используйте мастер-пароль.
3. **Шифрование**: Нажмите "Зашифровать", выберите место сохранения.
4. **Расшифровка**: Выберите зашифрованный файл, введите пароль и нажмите "Расшифровать".

### Вкладка "Пароли"
1. **Создание базы**: Нажмите "Создать базу" для новой базы паролей.
2. **Добавление паролей**: Нажмите "Добавить" для создания записи.
3. **Сохранение**: Введите мастер-пароль (если требуется) и нажмите "Сохранить".
4. **Импорт/Экспорт**: Используйте кнопки для импорта/экспорта в CSV.

### Вкладка "Настройки"
- **Метод шифрования**: Выберите метод (`binary_openssl_7zip`, `openssl_only`, `openssl_7zip`).
- **Сжатие**: Настройте степень сжатия для 7zip.
- **Версии программ**: Выберите версии 7zip и OpenSSL.
- **Telegram**: Настройте токен и chat ID для уведомлений.
- **Мастер-пароль**: Установите или обновите мастер-пароль.
- **Тема**: Выберите тему интерфейса.

## Криптографические алгоритмы

### AES-256-CBC
- **Описание**: Симметричный блочный шифр с 256-битным ключом, режим CBC.
- **Безопасность**: Устойчив к атакам благодаря большому ключу и CBC.
- **Использование**: OpenSSL для шифрования файлов и мастер-пароля, 7zip для архивов.

### PBKDF2
- **Описание**: Функция derivation ключа с HMAC-SHA256, солью и итерациями.
- **Цель**: Защита от brute-force и rainbow table атак.
- **Использование**: OpenSSL для создания ключа из пароля.

### Соль
- **Описание**: Случайная 8-байтная последовательность для уникальности ключа.
- **Цель**: Предотвращает атаки с предвычисленными таблицами.
- **Использование**: Хранится в заголовке зашифрованного файла OpenSSL.

## Логирование
- Операции логируются в `zipcrypt.log` с временными метками и уровнями (INFO, ERROR).

## Безопасность
- **Шифрование**: AES-256-CBC с PBKDF2 и солью.
- **Мастер-пароль**: Хранится в `master_password.enc` (AES-256-CBC).
- **Временные файлы**: Удаляются после операций.
- **Ограничения**: Мастер-пароль и временные файлы не перезаписываются при удалении.

## Поддержка
При проблемах:
1. Проверьте наличие 7zip и OpenSSL в папках `7zip/` и `OpenSSL/`.
2. Убедитесь в правильности путей в настройках.
3. Проверьте `zipcrypt.log` для диагностики.
4. Убедитесь в правах на запись для `settings.json` и `master_password.enc`.

## Лицензия
ZipCrypt распространяется под лицензией MIT.
